"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2802],{82802:function(n,e,t){t.r(e),t.d(e,{default:function(){return C}});var a=t(60920),r=t(56347),o=t(39299),c=t(19565),i=t(8135),s=t(63114),u=t(27652),l=t(10279),d=t(52413),f=t(42860),p="container_CJP8Y",v="selected-tags_tS_Dz",h="passages-container_Pg1B9",g="passage-operations_dToIs",m=t(86498),w=function(n){var e=n.onEnterPassage,t=n.catalogue,o=(0,r.s0)(),w=(0,r.e0)(),x=w.onReplaceTags,Z=w.onRemoveTag,j=w.onSelectTag,b=w.tags,k=(0,a.useState)(window.innerWidth),y=(0,s.Z)(k,2),C=y[0],M=y[1],N=Math.min(1416,C),R=Math.floor((N-40-20-6)/3),I=(0,a.useMemo)((function(){return Object.values(t||{})}),[t]),O=function(n){null===e||void 0===e||e(n),o("/passage/".concat(n["json-path"]))},P=function(){var n=(0,i.Z)((0,c.Z)().mark((function n(e){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.J)("".concat(window.location.protocol,"//").concat(window.location.host,"/#/passage/").concat(e["json-path"]));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,r.OR)("resize",(0,r.Nr)((function(){M(window.innerWidth)}))),(0,m.jsxs)("div",{className:p,style:{"--passages-list-width":"".concat(N,"px")},children:[!!b.length&&(0,m.jsxs)("div",{className:(0,l.Z)("blur","border-radius-normal",v),children:[null===b||void 0===b?void 0:b.map((function(n){return(0,m.jsx)(d.Vp,{selected:!0,onRemove:function(){return Z(n)},children:n})})),(0,m.jsx)(u.Z,{size:"small",color:"primary",onClick:function(){return x([])},children:"\u6e05\u9664"})]}),(0,m.jsx)("div",{className:h,children:I.map((function(n){var e,t;return(0,m.jsx)(d.Zb,{width:"".concat(R,"px"),onClickImage:function(){return O(n)},title:n.title,icon:n.icon,headerImage:n.cover,extraInfoHover:n.mdate,extraInfo:(0,m.jsx)("div",{children:null===n||void 0===n||null===(e=n.tags)||void 0===e||null===(t=e.map)||void 0===t?void 0:t.call(e,(function(n){return(0,m.jsx)(d.Vp,{onClick:function(){return j(n)},children:n},n)}))}),hoverContent:(0,m.jsxs)("div",{className:g,children:[(0,m.jsx)(d.JO,{className:"rp-faxian",text:"\u9605\u8bfb",onClick:function(){return O(n)}}),(0,m.jsx)(d.JO,{className:"rp-fuzhi",text:"\u590d\u5236",onClick:function(){return P(n)}})]})})}))})]})},x=t(99641),Z=t(56495),j=t(20810),b={tagsMap:new Map,catalogue:{}};function k(n){var e=n.onReady,t=(0,r.il)(j.Z),o=(0,s.Z)(t,3),u=o[0],l=o[1],d=o[2],f=(0,r.e0)().tags,p=(0,r.gz)(b),v=(0,s.Z)(p,2),h=v[0],g=v[1],m=(0,r.tG)((function(n){return Object.keys(n).reduce((function(e,t){var a,r=n[t];return 0===f.length||null!==(a=r.tags)&&void 0!==a&&a.some((function(n){return f.includes(n)}))?(0,Z.Z)((0,Z.Z)({},e),{},(0,x.Z)({},t,r)):e}),{})}));return(0,r.bd)((0,i.Z)((0,c.Z)().mark((function n(){var t,a,r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:t=n.sent,a=t.data,r=new Map,Object.values(a).reduce((function(n,e){var t=e.tags;return(void 0===t?[]:t).forEach((function(t){var a=n.get(t)||[];a.push(e),n.set(t,a)})),n}),r),g({tagsMap:r,catalogue:m(a)}),null===e||void 0===e||e();case 8:case"end":return n.stop()}}),n)}))),[f.join(","),m,g]),(0,a.useEffect)((function(){var n=(null===l||void 0===l?void 0:l.data)||{};g({catalogue:m(n)})}),[m,null===l||void 0===l?void 0:l.data,g]),(0,Z.Z)({loading:d},h)}var y=function(){var n=(0,r.Gm)(),e=n.setStates,t=k({onReady:n.onPageReady}).catalogue;return(0,a.useEffect)((function(){null===e||void 0===e||e({title:o.TN,footer:{showICP:!0,showCopyRight:!0,showPublicSecurity:!0}})}),[e]),(0,m.jsx)(w,{catalogue:t})},C=(0,a.memo)(y)},20810:function(n,e,t){t.d(e,{Z:function(){return i}});var a=t(19565),r=t(8135),o=t(60902),c=t.n(o);function i(){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c().get("/md/catalogue.json?r=".concat(Math.random()));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}}]);